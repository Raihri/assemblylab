		AREA DataSection, DATA, READWRITE

        EXPORT MAX_PATIENTS
        EXPORT PATIENT_SIZE
        EXPORT BILL_SIZE
        EXPORT PATIENT_ARRAY
        EXPORT BILLING_ARRAY
        EXPORT TREATMENT_TABLE
		EXPORT HR_BUFFER
		EXPORT BP_BUFFER 
		EXPORT O2_BUFFER
	    EXPORT VITAL_INDEX
		EXPORT HR_SENSORS
		EXPORT BP_SENSORS 
		EXPORT O2_SENSORS
		
		EXPORT ALERT_COUNT_ARRAY
        EXPORT ALERT_BUFFERS_BASE
        EXPORT ALERT_RECORD_SIZE
		EXPORT ALERT_FLAG_ARRAY
		EXPORT DOSAGE_DUE_ARRAY
		EXPORT MED_DAYS
			
		EXPORT ERROR_FLAG
        EXPORT ERROR_FLASH_LOG
        EXPORT ERROR_LOG_INDEX
       ; EXPORT CURRENT_TIME_COUNTER

      ;  EXPORT MED_INTERVAL_ARRAY
      ;  EXPORT MED_LAST_ADMIN_ARRAY
      ; EXPORT DOSAGE_DUE_ARRAY

; Constants stored as memory words
MAX_PATIENTS    DCD 3
PATIENT_SIZE    DCD 44
BILL_SIZE       DCD 16

; Arrays
PATIENT_ARRAY   EQU 0x20000000   
BILLING_ARRAY   SPACE 16 * 3

;buffer

HR_BUFFER      SPACE 4 * 10 * 3   ; 120 bytes
BP_BUFFER      SPACE 4 * 10 * 3
O2_BUFFER      SPACE 4 * 10 * 3

VITAL_INDEX    SPACE 3            ; 1 byte per patient

ALERT_RECORD_SIZE   DCD 16          ; 16 bytes per alert record
ALERT_BUFFERS_BASE  DCD 0x20001000  ; base of alert buffers
ALERT_COUNT_ARRAY   SPACE 4*3
ALERT_FLAG_ARRAY    SPACE 3

; Internal clock counter (seconds / time units)
;CURRENT_TIME_COUNTER	 DCD 0           ; initialize to 0
DOSAGE_DUE_ARRAY	SPACE 12         ; 4 patients Ã— 4 bytes (example)
       
MED_DAYS   DCD 7        

       

; Individual sensor readings for 3 patients
HR_SENSOR1 DCD 100
HR_SENSOR2 DCD 102
HR_SENSOR3 DCD 101

BP_SENSOR1 DCD 120
BP_SENSOR2 DCD 118
BP_SENSOR3 DCD 122

O2_SENSOR1 DCD 98
O2_SENSOR2 DCD 97
O2_SENSOR3 DCD 95

; Arrays of sensor addresses
HR_SENSORS DCD HR_SENSOR1, HR_SENSOR2, HR_SENSOR3
BP_SENSORS DCD BP_SENSOR1, BP_SENSOR2, BP_SENSOR3
O2_SENSORS DCD O2_SENSOR1, O2_SENSOR2, O2_SENSOR3
	
; --- Module 11 state ---
ERROR_FLAG        SPACE 1
ERROR_FLASH_LOG   SPACE 64
ERROR_LOG_INDEX   DCD 0
	
;MED_INTERVAL_ARRAY	 DCD 6, 8, 12        ; hours per patient

       
;MED_LAST_ADMIN_ARRAY	 DCD 480, 460, 450   ; timestamps

       
;DOSAGE_DUE_ARRAY	 DCB 0, 0, 0
       
		
; Lookup table
TREATMENT_TABLE DCD 0,10000,15000,20000,25000

        END
